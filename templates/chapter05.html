<h2>JSONデータを入出力するサンプル</h2>

JSONデータを入出力するサンプルプログラムを書いてみます。JSONは、多次元データ構造を表現できるWebで使われるデファクトスタンダードなデータ形式です。

<h3>複数の書籍の情報を表現するJSONデータ</h3>

JSONはUTF-8のテキストとして表現されます。前の章で熱方、書籍のCSVデータは次のようなものでしたが、これをJSONとして表現してみましょう。

<pre>
ID,書名,著者名,価格,発売日
1,Perlテキスト処理プログラミング入門,木本裕紀,2900,2021-01-03
2,Web開発をやるぜPerl,木本裕紀,2000,2021-01-03
3,データベース入門,田中太郎,1900,2019-03-06
</pre>

JSONとして表現したものが以下です。項目名は、英語にして、連想配列の配列というデータ構造で表現しています。

<pre>
[
  {
    "id" : 1,
    "name" : "Perlテキスト処理プログラミング入門",
    "author_name" : "木本裕紀",
    "price" : 2900,
    "issued_date" : "2021-01-03"
  },
  {
    "id" : 2,
    "name" : "Web開発をやるぜPerl",
    "author_name" : "木本裕紀",
    "price" : 2000,
    "issued_date" : "2021-01-03"
  },
  {
    "id" : 3,
    "name" : "データベース入門",
    "author_name" : "田中太郎",
    "price" : 1900,
    "issued_date" : "2019-03-06"
  },
]
</pre>

<h3>JSONデータフォーマットの解説</h3>

JSONのデータフォーマットについて、簡単に解説しておきます。

<h4>数値</h4>

数値は「1」や「1.5」のように表現します。

<pre>
1

1.5
</pre>

<h4>文字列</h4>

文字列はダブルクォート「"」で囲んで表現します。

<pre>
"name"

"Perlテキスト処理プログラミング入門"
</pre>

  {"id" : 1, "name" : "モジガエル"},

配列は「[」と「]」で囲んで「,」で複数の要素を並べます。

<pre>
[3, 5, 7]

["apple", "orange", "banana"]
</pre>

空白や改行は、見やすくするために、自由に使うことができます。

<pre>
[
  3,
  5,
  7
]
</pre>

連想配列を要素にすることもできます。

<pre>
[
  {"id" : 1, "name" : "モジガエル"},
  {"id" : 2, "name" : "サーバー太郎"},
]
</pre>

<h4>連想配列</h4>

連想配列は「{」と「}」で囲んで、キーと値のペアを「,」で複数並べます。キーと値は「:」で繋げます。キーは、文字列である必要があります。Perlのハッシュに該当します。

<pre>
{"id" : 1, "name" : "モジガエル"},
</pre>

もう一度、JSONデータ構造を見てみましょう。配列の要素として、連想配列を持っているというところをよく見てみます。

<pre>
[
  {
    "id" : 1,
    "name" : "Perlテキスト処理プログラミング入門",
    "author_name" : "木本裕紀",
    "price" : 2900,
    "issued_date" : "2021-01-03"
  },
  {
    "id" : 2,
    "name" : "Web開発をやるぜPerl",
    "author_name" : "木本裕紀",
    "price" : 2000,
    "issued_date" : "2021-01-03"
  },
  {
    "id" : 3,
    "name" : "データベース入門",
    "author_name" : "田中太郎",
    "price" : 1900,
    "issued_date" : "2019-03-06"
  },
]
</pre>

わかりやすくするために、疑似的に表現してみましょう。配列の要素が、連想配列になっているという関係性がわかればOKです。

<pre>
[
  A,
  B,
  C
]

A = {
    "id" : 1,
    "name" : "Perlテキスト処理プログラミング入門",
    "author_name" : "木本裕紀",
    "price" : 2900,
    "issued_date" : "2021-01-03"
  }

B = {
    "id" : 2,
    "name" : "Web開発をやるぜPerl",
    "author_name" : "木本裕紀",
    "price" : 2000,
    "issued_date" : "2021-01-03"
  }

C = {
    "id" : 3,
    "name" : "データベース入門",
    "author_name" : "田中太郎",
    "price" : 1900,
    "issued_date" : "2019-03-06"
  }
</pre>

